import{c as ae}from"./chunk-CIHMLPKO.js";import"./chunk-SZTCWN4M.js";import{a as K,c as Q}from"./chunk-6Y77SDWP.js";import{a as oe}from"./chunk-FC75XUEN.js";import"./chunk-OUAMXWST.js";import"./chunk-XVPSVN7Z.js";import{a as ne}from"./chunk-35SNKNNU.js";import{a as ie}from"./chunk-WLFXVXUA.js";import"./chunk-3AFYCWEY.js";import"./chunk-7B4WEPGY.js";import{a as q,c as H}from"./chunk-ONIKTDMA.js";import{C as ee,D as te,c as X,g as Y,l as Z,o as $}from"./chunk-IWUKBY46.js";import"./chunk-7ZKIOEOA.js";import"./chunk-Y5BMXVS7.js";import{Ac as P,Bc as A,Cc as N,Db as f,Dc as F,Ea as y,Fa as v,Fb as d,Pb as i,Qb as t,Rb as x,Sa as D,Vb as C,Yb as I,_b as c,fb as T,gd as L,ha as S,hc as j,ic as l,jc as W,kc as u,lb as r,lc as R,ma as B,mb as h,md as O,nd as G,oc as k,pc as b,pd as U,qc as w,rc as z,rd as J,sc as V,ta as M}from"./chunk-PWWHKO4X.js";import"./chunk-4LMIJWLY.js";function se(){return window}var re=(()=>{let o=class o{constructor(a){this.platformId=a}get nativeWindow(){if(J(this.platformId))return se()}};o.\u0275fac=function(s){return new(s||o)(B(D))},o.\u0275prov=S({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function pe(e,o){if(e&1){let n=C();i(0,"span",38),I("click",function(){y(n);let s=c();return v(s.toggleBalance())}),l(1,"Check Balance"),t()}}function de(e,o){if(e&1){let n=C();i(0,"span",38),I("click",function(){y(n);let s=c();return v(s.toggleBalance())}),l(1),t()}if(e&2){let n=c();r(),u("INR ",n.walletBalance,"")}}function ce(e,o){if(e&1&&(i(0,"div",39),x(1,"img",40),t()),e&2){let n=c();r(),d("src",n.appoinmentDetails.doctorInfo[0].profilePic,T)}}function fe(e,o){if(e&1&&(i(0,"div",41)(1,"h4",42)(2,"a",43),l(3),t()(),i(4,"p",44),l(5),t()()),e&2){let n=c();r(3),R("Dr.",n.appoinmentDetails.doctorInfo[0].firstName," ",n.appoinmentDetails.doctorInfo[0].lastName,""),r(2),u(" ",n.appoinmentDetails.doctorSpecialization[0].name," ")}}function ge(e,o){if(e&1&&(i(0,"span",45),l(1),P(2,"date"),t()),e&2){let n=c();r(),u("",N(2,1,n.appoinmentDetails.date,"EEE, dd MMM yyyy")," ")}}function ue(e,o){if(e&1&&(i(0,"div",27)(1,"h4",28),l(2,"Booking Time:"),t(),i(3,"span",45),l(4),t()()),e&2){let n=c();r(4),W(n.appoinmentDetails.slot)}}function he(e,o){if(e&1&&(i(0,"div",27)(1,"h4",28),l(2,"Consultation Type:"),t(),i(3,"span",45),l(4),P(5,"titlecase"),t()()),e&2){let n=c();r(4),u("",A(5,1,n.appoinmentDetails.typeOfAppointment)," Consulting")}}function xe(e,o){if(e&1&&(i(0,"div",27)(1,"h4",28),l(2,"Duration:"),t(),i(3,"span",45),l(4),t()()),e&2){let n=c();r(4),u("",n.appoinmentDetails.duration," min ")}}function ye(e,o){if(e&1&&(i(0,"div",33)(1,"p",34),l(2," Consultation Fee: "),t(),i(3,"p",35),l(4),t()()),e&2){let n=c();r(4),u(" \u20B9 ",n.appoinmentDetails.amount," ")}}function ve(e,o){if(e&1&&(i(0,"div",46)(1,"p",34),l(2,"Total"),t(),i(3,"p",47),l(4),t()()),e&2){let n=c();r(4),u(" \u20B9 ",n.appoinmentDetails.amount,".00 ")}}function _e(e,o){e&1&&x(0,"i",50)}function Ce(e,o){if(e&1){let n=C();i(0,"button",48),I("click",function(){y(n);let s=c();return v(s.makePayment())}),f(1,_e,1,0,"i",49),l(2),t()}if(e&2){let n=c();r(),d("ngIf",n.isLoading),r(),u("Proceed to Pay \u20B9",n.appoinmentDetails.amount,".00 ")}}function Ie(e,o){e&1&&(i(0,"p"),l(1,"Loading..."),t())}var Ae=(()=>{let o=class o{constructor(a,s,m,p,_,g){this.route=a,this.userService=s,this.toastr=m,this.winRef=p,this.router=_,this.notificationService=g,this.isCheckBalance=!1,this.isLoading=!1,this.selectedPaymentMethod="",this.loading=!0,this.route.params.subscribe(E=>{console.log("Param",E),this.appoinmentId=E.appoinmentId})}ngOnInit(){this.getAppoinment(),this.getWalletBalance()}getAppoinment(){this.userService.GetAppointmentDetails(this.appoinmentId).subscribe({next:a=>{console.log("AppointmentDetails",a),this.appoinmentDetails=a.data,this.loading=!1},error:a=>{this.toastr.error(a||"Error while Get Appoinments please try again")}})}makePayment(){if(!this.selectedPaymentMethod){this.toastr.warning("Please select Payment Method"),console.log("Please select a payment method.");return}if(this.selectedPaymentMethod!=="Wallet"&&this.selectedPaymentMethod!=="Debit Card"&&this.selectedPaymentMethod!=="PayPal"&&this.selectedPaymentMethod!=="Razorpay"&&this.selectedPaymentMethod!=="Stripe"){console.log("Invalid payment method selected."),this.toastr.warning("Invalid payment method selected");return}console.log("Selected payment method:",this.selectedPaymentMethod),this.isLoading=!0,this.processPayment()}processPayment(a){this.userService.makePayment(this.selectedPaymentMethod,this.appoinmentId,a).subscribe({next:s=>{switch(console.log("After Payment",s),this.isLoading=!1,this.selectedPaymentMethod){case"Razorpay":this.payWithRazorpay(s.data);break;case"Wallet":location.href=`/booking-confirmation/${s.data.appointmentId}`;break;default:break}},error:s=>{this.isLoading=!1,this.toastr.error(s)}})}payWithRazorpay(a){let s={key:a.keyId,amount:a.amount,currency:"INR",name:"Maitri Consultation ",description:"Payment for your service",order_id:a.responseId,handler:p=>{this.verifyPayment(p.razorpay_order_id,p.razorpay_payment_id,p.razorpay_signature)},prefill:{name:"John Doe",email:"john@example.com",contact:"+919876543210"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#3399cc"}};new this.winRef.nativeWindow.Razorpay(s).open()}verifyPayment(a,s,m){this.userService.verifyPayment(a,s,m,this.appoinmentId).subscribe({next:p=>{console.log("verify payment",p);let _=p.data.notificationId;this.notificationService.sendNotification(_),location.href=`/booking-confirmation/${p.data.appoinmentId}`},error:p=>{this.toastr.error(p)}})}getWalletBalance(){this.userService.getWalletBalance().subscribe({next:a=>{this.walletBalance=a.data},error:a=>{this.toastr.error(a)}})}toggleBalance(){this.isCheckBalance=!this.isCheckBalance}};o.\u0275fac=function(s){return new(s||o)(h(q),h(ie),h(ne),h(re),h(H),h(oe))},o.\u0275cmp=M({type:o,selectors:[["app-booking-checkout-page"]],standalone:!0,features:[z([K]),V],decls:64,vars:23,consts:[["loadingBlock",""],[1,"grid","sm:px-10","lg:grid-cols-2","lg:px-14","xl:px-16"],[1,"px-4","pt-8"],[1,"text-xl","font-medium"],[1,"text-gray-400"],[1,"grid","gap-4","mt-10"],[1,"flex","relative","items-center","justify-center","bg-gray-100","rounded","px-4","py-8"],["class","absolute top-1 right-1 hover:cursor-pointer inline-flex items-center justify-center px-2 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",3,"click",4,"ngIf"],["type","radio","id","Wallet","value","Wallet",1,"w-6","h-6","cursor-pointer",3,"ngModelChange","disabled","ngModel"],["for","Wallet",1,"ml-4","flex","gap-2","cursor-pointer"],["src","https://cdn.icon-icons.com/icons2/1103/PNG/512/wallet_78921.png","alt","Wallet",1,"w-28"],[1,"flex","items-center","justify-center","bg-gray-100","rounded","px-4","py-8"],["type","radio","id","razorpay","value","Razorpay",1,"w-6","h-6","cursor-pointer",3,"ngModelChange","ngModel"],["for","razorpay",1,"ml-4","flex","gap-2","cursor-pointer"],["src","https://www.vcbay.news/wp-content/uploads/2020/10/image-15.png","alt","Razorpay",1,"w-28"],[1,"lg:ms-5","mt-10","rounded-md","px-4","pt-8","lg:mt-0"],[1,"grid","grid-cols-1","gap-4"],[1,"col-span-1"],[1,"bg-white","shadow-lg","rounded-lg"],[1,"p-4"],[1,"flex","items-center"],["class","flex-shrink-0 w-12 h-12",4,"ngIf","ngIfElse"],["class","ml-7",4,"ngIf","ngIfElse"],[1,"ml-auto"],[1,"mr-4","text-sm","text-green-500"],[1,"flex","flex-col","gap-2"],[1,"mb-2"],[1,"flex","justify-between"],[1,"font-semibold"],["class","font-light right-0",4,"ngIf","ngIfElse"],["class","flex justify-between",4,"ngIf","ngIfElse"],[1,"p-2","flex","justify-end"],["class","flex items-center justify-between",4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-900"],[1,"font-semibold","text-gray-900"],["class","mt-6 flex items-center border-t-2 border-black pt-3 justify-between",4,"ngIf","ngIfElse"],["class","mt-4 mb-8 w-full rounded-md bg-blue-500 px-6 py-3 font-medium text-white",3,"click",4,"ngIf","ngIfElse"],[1,"absolute","top-1","right-1","hover:cursor-pointer","inline-flex","items-center","justify-center","px-2","py-1","bg-blue-500","text-white","text-xs","font-bold","rounded-full",3,"click"],[1,"flex-shrink-0","w-12","h-12"],["alt","Doctor",1,"w-full","h-full","rounded-full",3,"src"],[1,"ml-7"],[1,"text-lg","font-semibold"],["href","doctor-profile.html"],[1,"text-sm"],[1,"font-light","right-0"],[1,"mt-6","flex","items-center","border-t-2","border-black","pt-3","justify-between"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"mt-4","mb-8","w-full","rounded-md","bg-blue-500","px-6","py-3","font-medium","text-white",3,"click"],["class","fas fa-spinner fa-spin mr-1",4,"ngIf"],[1,"fas","fa-spinner","fa-spin","mr-1"]],template:function(s,m){if(s&1){let p=C();i(0,"div",1)(1,"div",2)(2,"p",3),l(3,"Payment Methods"),t(),i(4,"p",4),l(5," Check your Appoinment. And select a suitable payment Method. "),t(),i(6,"div",5)(7,"div",6),f(8,pe,2,0,"span",7)(9,de,2,1,"span",7),i(10,"input",8),w("ngModelChange",function(g){return y(p),b(m.selectedPaymentMethod,g)||(m.selectedPaymentMethod=g),v(g)}),t(),i(11,"label",9),x(12,"img",10),t()(),i(13,"div",11)(14,"input",12),w("ngModelChange",function(g){return y(p),b(m.selectedPaymentMethod,g)||(m.selectedPaymentMethod=g),v(g)}),t(),i(15,"label",13),x(16,"img",14),t()()()(),i(17,"div",15)(18,"p",3),l(19,"Booking Summary"),t(),i(20,"p",4),l(21," Complete your order by providing your payment details. "),t(),i(22,"div",16)(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20),f(27,ce,2,1,"div",21)(28,fe,6,3,"div",22),i(29,"div",23),x(30,"i",24),t()()()()(),i(31,"div",17)(32,"div",18)(33,"div",19)(34,"ul",25)(35,"li",26)(36,"div",27)(37,"h4",28),l(38,"Booking Date:"),t(),f(39,ge,3,4,"span",29),t()(),i(40,"li",26),f(41,ue,5,1,"div",30),t(),i(42,"li",26),f(43,he,6,3,"div",30),t(),i(44,"li",26),f(45,xe,5,1,"div",30),t()()(),x(46,"div",31),t()(),i(47,"div",17)(48,"div",18)(49,"div",19)(50,"ul",25)(51,"li",26),f(52,ye,5,1,"div",32),t(),i(53,"li",26)(54,"div",33)(55,"p",34),l(56,"Booking Fee"),t(),i(57,"p",35),l(58,"\u20B90.00"),t()()(),i(59,"li"),f(60,ve,5,1,"div",36),t()()()()()(),f(61,Ce,3,2,"button",37),t()(),f(62,Ie,2,0,"ng-template",null,0,F)}if(s&2){let p=j(63);r(8),d("ngIf",!m.isCheckBalance),r(),d("ngIf",m.isCheckBalance),r(),d("disabled",m.walletBalance<m.appoinmentDetails.amount),k("ngModel",m.selectedPaymentMethod),r(4),k("ngModel",m.selectedPaymentMethod),r(13),d("ngIf",!m.loading)("ngIfElse",p),r(),d("ngIf",!m.loading)("ngIfElse",p),r(11),d("ngIf",!m.loading)("ngIfElse",p),r(2),d("ngIf",!m.loading)("ngIfElse",p),r(2),d("ngIf",!m.loading)("ngIfElse",p),r(2),d("ngIf",!m.loading)("ngIfElse",p),r(7),d("ngIf",!m.loading)("ngIfElse",p),r(8),d("ngIf",!m.loading)("ngIfElse",p),r(),d("ngIf",!m.loading)("ngIfElse",p)}},dependencies:[Q,U,L,O,G,ee,X,$,Y,Z,ae,te]});let e=o;return e})();export{Ae as BookingCheckoutPageComponent};
