import{a as Y,d as Z}from"./chunk-BISGSX4G.js";import{n as U,o as X,p as V}from"./chunk-B63CGU3U.js";import{a as P,c as F}from"./chunk-FX3PANRP.js";import{A as K,C as Q,c as D,g as G,h as A,j as q,l as z,m as J,z as H}from"./chunk-YKYY62M2.js";import"./chunk-3UF7QMRJ.js";import"./chunk-Y6YHTU6Y.js";import{H as O,Ib as v,Ic as N,Ja as l,Ka as d,Kb as x,La as C,Ub as o,Vb as s,Wb as S,Xb as E,Yb as I,_b as M,bc as u,dc as T,jd as j,mc as f,nc as c,oc as L,pc as W,qb as p,rb as b,sd as B,tc as h,uc as _,vc as w,xc as R,ya as k}from"./chunk-7CRQF3FF.js";function $(i){return i.split(".").length===3}var ee=i=>i.otp,te=V(ee,i=>i.loading),ie=V(ee,i=>i.error);function ne(i,m){i&1&&(C(),o(0,"svg",31),S(1,"circle",32)(2,"path",33),s())}function oe(i,m){i&1&&(C(),o(0,"svg",34),S(1,"path",35)(2,"circle",36)(3,"path",37),s())}function re(i,m){if(i&1){let y=M();E(0),c(1," Didn't receive code? "),o(2,"button",38),u("click",function(){l(y);let r=T();return d(r.resend())}),c(3,"Resend"),s(),I()}}function se(i,m){i&1&&(o(0,"span"),c(1,"Resending..."),s(),S(2,"div",39))}function ae(i,m){if(i&1&&(o(0,"div",28),c(1),s()),i&2){let y=T();p(),W(" Resend code in ",y.secondsRemaining," seconds ")}}var ye=(()=>{let m=class m{constructor(n,r,e){this.store=n,this.router=r,this.route=e,this.digits=["","","","","",""],this.showResendButton=!1,this.secondsRemaining=60,this.isLoading=!1,this.resendLoading=!1,this.showOtpTimer=!0}ngOnInit(){this.section=this.route.snapshot.data.expectedRole,this.token=this.route.snapshot.queryParamMap.get("authToken"),!this.token||!$(this.token)?this.router.navigate(["/Not-found"]):this.startCountdown(),this.store.pipe(X(ie)).subscribe(n=>{n&&(this.errorMessage=n.message)}),this.loadingGetFromStore()}ngOnDestroy(){this.timerSubscription&&this.timerSubscription.unsubscribe()}loadingGetFromStore(n="normal"){this.store.select(te).subscribe(r=>{this.isLoading=r,n==="resend"&&!r&&(this.resendLoading=!1)})}startCountdown(){let n=new Date().getTime(),r=localStorage.getItem("countdown_start_time");if(r){let e=n-parseInt(r,10),a=Math.max(60-Math.floor(e/1e3),0);this.startTimer(a)}else localStorage.setItem("countdown_start_time",n.toString()),this.startTimer(60)}startTimer(n){this.secondsRemaining=n,this.timerSubscription=O(1e3).subscribe(()=>{this.secondsRemaining>0?this.secondsRemaining--:(this.showResendButton=!0,this.timerSubscription?.unsubscribe())})}moveToNext(n){n.focus()}onSubmit(){console.log("The value is: ",this.digits.join("")),this.digits.join("").length===6&&this.section&&(console.log("The value is: ",this.digits.join("")),this.store.dispatch(Y({otp:this.digits.join(""),section:this.section})))}resend(){console.log("Resend clicked"),this.token?(console.log("Resend called"),this.resendLoading=!0,this.store.dispatch(Z({token:this.token})),this.loadingGetFromStore("resend")):alert("Please register again")}otpTimer(n){if(n<=0){this.timerSeconds=0,this.timerMintes=0;return}this.timerSeconds=0,this.timerMintes=Math.floor(n/60);let r=n%60;r!==0&&(this.timerSeconds=r),this.timerMintes<1&&(this.timerSeconds=n);let e=setInterval(()=>{this.timerSeconds-=1,this.timerMintes>0&&this.timerSeconds<0&&(this.timerSeconds=59,this.timerMintes-=1),this.timerSeconds===0&&this.timerMintes===0&&clearInterval(e)})}};m.\u0275fac=function(r){return new(r||m)(b(U),b(F),b(P))},m.\u0275cmp=k({type:m,selectors:[["app-otp-component"]],standalone:!0,features:[R],decls:35,vars:13,consts:[["input1",""],["input2",""],["input3",""],["input4",""],["input5",""],["input6",""],["loadingSpinner",""],[1,"relative","font-inter","antialiased"],[1,"relative","min-h-screen","flex","flex-col","justify-center","bg-slate-50","overflow-hidden"],[1,"w-full","max-w-6xl","mx-auto","px-4","md:px-6","py-24"],[1,"flex","justify-center"],[1,"max-w-md","mx-auto","text-center","bg-white","px-4","sm:px-8","py-10","rounded-xl","shadow"],[1,"mb-8"],[1,"text-2xl","font-bold","mb-1"],[1,"text-[15px]","text-slate-500"],["id","otp-form",3,"ngSubmit"],[1,"flex","items-center","justify-center","gap-3"],["type","text","name","digit1","maxlength","1","pattern","\\d*","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","input","ngModel"],["type","text","name","digit2","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","input","ngModel"],["type","text","name","digit3","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","input","ngModel"],["type","text","name","digit4","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","input","ngModel"],["type","text","name","digit5","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","input","ngModel"],["type","text","name","digit6","maxlength","1",1,"w-14","h-14","text-center","text-2xl","font-extrabold","text-slate-900","bg-slate-100","border","border-transparent","hover:border-slate-200","appearance-none","rounded","p-4","outline-none","focus:bg-white","focus:border-indigo-400","focus:ring-2","focus:ring-indigo-100",3,"ngModelChange","ngModel"],[1,"max-w-[260px]","mx-auto","mt-4"],["type","submit",1,"w-full","inline-flex","justify-center","whitespace-nowrap","rounded-lg","bg-blue-500","px-3.5","py-2.5","text-sm","font-medium","text-white","shadow-sm","shadow-indigo-950/10","hover:bg-blue-600","focus:outline-none","focus:ring","focus:ring-indigo-300","focus-visible:outline-none","focus-visible:ring","focus-visible:ring-indigo-300","transition-colors","duration-150",3,"disabled"],["class","spinner animate-spin w-6 h-6 -ml-2","viewBox","0 0 24 24",4,"ngIf"],["class","w-6 h-6 -ml-2","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"ml-3"],[1,"text-sm","text-slate-500","mt-4"],[4,"ngIf","ngIfElse"],["class","text-sm text-slate-500 mt-4",4,"ngIf"],["viewBox","0 0 24 24",1,"spinner","animate-spin","w-6","h-6","-ml-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.373A8 8 0 0012 20v-4a7.946 7.946 0 01-4-1.073V17z",1,"opacity-75"],["fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","-ml-2"],["d","M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"],["cx","8.5","cy","7","r","4"],["d","M20 8v6M23 11h-6"],[1,"font-medium","text-indigo-500","hover:text-indigo-600",3,"click"],[1,"inline-block","animate-spin","text-indigo-500","h-5","w-5"]],template:function(r,e){if(r&1){let a=M();o(0,"div",7)(1,"main",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"header",12)(6,"h1",13),c(7,"Email Verification"),s(),o(8,"p",14),c(9,"Enter the 6-digit verification code that was sent to your phone number."),s()(),o(10,"form",15),u("ngSubmit",function(){return l(a),d(e.onSubmit())}),o(11,"div",16)(12,"input",17,0),w("ngModelChange",function(t){return l(a),_(e.digits[0],t)||(e.digits[0]=t),d(t)}),u("input",function(){l(a);let t=f(15);return d(e.moveToNext(t))}),s(),o(14,"input",18,1),w("ngModelChange",function(t){return l(a),_(e.digits[1],t)||(e.digits[1]=t),d(t)}),u("input",function(){l(a);let t=f(17);return d(e.moveToNext(t))}),s(),o(16,"input",19,2),w("ngModelChange",function(t){return l(a),_(e.digits[2],t)||(e.digits[2]=t),d(t)}),u("input",function(){l(a);let t=f(19);return d(e.moveToNext(t))}),s(),o(18,"input",20,3),w("ngModelChange",function(t){return l(a),_(e.digits[3],t)||(e.digits[3]=t),d(t)}),u("input",function(){l(a);let t=f(21);return d(e.moveToNext(t))}),s(),o(20,"input",21,4),w("ngModelChange",function(t){return l(a),_(e.digits[4],t)||(e.digits[4]=t),d(t)}),u("input",function(){l(a);let t=f(23);return d(e.moveToNext(t))}),s(),o(22,"input",22,5),w("ngModelChange",function(t){return l(a),_(e.digits[5],t)||(e.digits[5]=t),d(t)}),s()(),o(24,"div",23)(25,"button",24),v(26,ne,3,0,"svg",25)(27,oe,4,0,"svg",26),o(28,"span",27),c(29),s()()()(),o(30,"div",28),v(31,re,4,0,"ng-container",29)(32,se,3,0,"ng-template",null,6,N),s(),v(34,ae,2,1,"div",30),s()()()()()}if(r&2){let a=f(33);p(12),h("ngModel",e.digits[0]),p(2),h("ngModel",e.digits[1]),p(2),h("ngModel",e.digits[2]),p(2),h("ngModel",e.digits[3]),p(2),h("ngModel",e.digits[4]),p(2),h("ngModel",e.digits[5]),p(3),x("disabled",e.isLoading),p(),x("ngIf",e.isLoading&&!e.resendLoading),p(),x("ngIf",!e.isLoading),p(2),L(e.isLoading&&!e.resendLoading?"Loading...":"Verify Account"),p(2),x("ngIf",!e.resendLoading)("ngIfElse",a),p(3),x("ngIf",e.showResendButton===!1)}},dependencies:[Q,J,D,G,A,H,K,z,q,B,j]});let i=m;return i})();export{ye as OtpComponent};
