import{n as M}from"./chunk-AA2U36RO.js";import{a as E,b as j}from"./chunk-SNQRNES7.js";import{b as B}from"./chunk-NJHSAT6J.js";import{a as T}from"./chunk-Y4XKOMAP.js";import{c as L}from"./chunk-63APZDV3.js";import{A as U,g as P}from"./chunk-TG65SF6R.js";import{n as D}from"./chunk-UC2OFU5X.js";import{Db as b,Eb as k,Fb as p,Ga as c,Ha as f,Pb as t,Qb as r,Rb as d,Yb as x,_b as g,fb as S,gd as C,ic as m,jc as v,kc as w,lb as n,mb as h,pd as I,sc as _,ta as y}from"./chunk-PWWHKO4X.js";function V(o,s){if(o&1&&d(0,"app-post-carousel",38),o&2){let u=g();p("slides",u.post.media)}}function G(o,s){if(o&1&&(t(0,"div",39)(1,"h2",40),m(2),r()()),o&2){let u=g();n(2),v(u.post.title)}}function H(o,s){if(o&1&&(t(0,"div",41),m(1),r()),o&2){let u=g();n(),v(u.post.content)}}function $(o,s){o&1&&(c(),t(0,"svg",42),d(1,"path",43),r())}function z(o,s){o&1&&(c(),t(0,"svg",44),d(1,"path",43),r())}var Z=(()=>{let s=class s{constructor(i,l,e){this.store=i,this.feedService=l,this.dialog=e,this.isCommentBoxHidden=!1,this.isSavedPost=!1,this.isLiked=!0}ngOnInit(){this.post=this.postData.post,console.log("Post data ",this.postData,this.post),this.calculateTimeDifference(),this.loadCurrentUser(),this.getCurentUser()}ngAfterViewInit(){}loadCurrentUser(){this.userType==="Doctor"?this.store.dispatch(M()):this.store.dispatch(P())}getLikedStatus(){return console.log(this.currentUser),this.post.likes.some(i=>i.userId===this.currentUser._id)}isUserSavedPost(){let i=this.currentUser?._id;return i?(console.log(this.post.savedBy.some(e=>e.userId.toString()===i.toString()),"this.post.savedBy.some((post:SavedPost) => post.userId.toString() === currentUserID.toString() )"),this.post.savedBy.some(e=>e.userId.toString()===i.toString())):(console.error("Current user not available."),!1)}getCurentUser(){this.store.select(U).subscribe(i=>{this.currentUser=i,console.log(this.currentUser),this.isLiked=this.getLikedStatus(),this.isSavedPost=this.isUserSavedPost()})}calculateTimeDifference(){let i=new Date,l=new Date(this.post.createdAt),e=Math.floor((i.getTime()-l.getTime())/1e3);if(e<60)this.timeDifference=`${e} seconds ago`;else if(e<3600){let a=Math.floor(e/60);this.timeDifference=`${a} minute${a>1?"s":""} ago`}else if(e<86400){let a=Math.floor(e/3600);this.timeDifference=`${a} hour${a>1?"s":""} ago`}else if(e<604800){let a=Math.floor(e/86400);this.timeDifference=`${a} day${a>1?"s":""} ago`}else this.timeDifference=l.toLocaleDateString()}toggleLike(){this.feedService.likePost(this.post._id).subscribe({next:i=>{this.isLiked=!this.isLiked},error(i){console.log(i)}})}toggleCommentBoxVisibility(){this.dialog.open(j,{width:"600px",data:{postId:this.post._id}})}handleChilLike(i){this.toggleLike()}toggleSavePost(){this.feedService.toggleSavePost(this.post._id).subscribe({next:i=>{this.isSavedPost=!this.isSavedPost},error(i){console.log(i)}})}};s.\u0275fac=function(l){return new(l||s)(h(D),h(T),h(L))},s.\u0275cmp=y({type:s,selectors:[["post-component"]],inputs:{postData:"postData",userType:"userType"},standalone:!0,features:[_],decls:46,vars:11,consts:[[1,"bg-white","shadow","rounded-lg","mb-6"],[1,"flex","flex-row","px-2","py-3","mx-3"],[1,"w-auto","h-auto","rounded-full"],["alt","User avatar",1,"w-12","h-12","object-cover","rounded-full","shadow","cursor-pointer",3,"src"],[1,"flex","flex-col","mb-2","ml-4","mt-1"],[1,"text-gray-600","text-sm","font-semibold"],[1,"flex","w-full","mt-1"],[1,"text-blue-700","font-base","text-xs","mr-1","cursor-pointer"],[1,"text-gray-400","font-thin","text-xs"],[1,"border-b","border-gray-100"],[3,"slides",4,"ngIf"],["class","text-gray-600  mb-3 mx-3 px-2",4,"ngIf"],["class","text-gray-500 text-sm mb-6 mx-3 px-2",4,"ngIf"],[1,"flex","justify-start","mb-4","border-t","border-gray-100"],[1,"flex","w-full","mt-1","pt-2","pl-5"],[1,"bg-white","transition","ease-out","duration-300","hover:text-red-500","border","w-8","h-8","px-2","pt-2","text-center","rounded-full","text-gray-400","cursor-pointer","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14px","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"],[1,"flex","justify-end","w-full","mt-1","pt-2","pr-5"],[1,"transition","ease-out","duration-300","hover:bg-blue-50","bg-blue-100","w-8","h-8","px-2","py-2","text-center","rounded-full","text-blue-400","cursor-pointer","mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","width","14px","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"],[1,"transition","ease-out","duration-300","hover:bg-gray-50","bg-gray-100","h-8","px-2","py-2","text-center","rounded-full","text-gray-100","cursor-pointer",3,"click"],["class","h-4 w-4 text-red-500","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",4,"ngIf"],["class","h-4 w-4 text-red-500","fill","red","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"flex","w-full","border-t","border-gray-100"],[1,"mt-3","mx-5","flex","flex-row","text-xs"],[1,"flex","text-gray-700","font-normal","rounded-md","mb-2","mr-4","items-center"],[1,"ml-1","text-gray-400","text-ms"],[1,"mt-3","mx-5","w-full","flex","justify-end","text-xs"],[1,"flex","text-gray-700","rounded-md","mb-2","mr-4","items-center"],[1,"relative","flex","items-center","self-center","w-full","max-w-xl","p-4","overflow-hidden","text-gray-600","focus-within:text-gray-400"],["alt","User avatar","src","https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80",1,"w-10","h-10","object-cover","rounded-full","shadow","mr-2","cursor-pointer"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-6"],["type","submit",1,"p-1","focus:outline-none","focus:shadow-none","hover:text-blue-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","transition","ease-out","duration-300","hover:text-blue-500","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["type","search","readonly","","placeholder","Post a comment...","autocomplete","off",1,"w-full","py-2","pl-4","pr-10","text-sm","bg-gray-100","border","border-transparent","appearance-none","rounded-tg","placeholder-gray-400",2,"border-radius","25px",3,"click"],[3,"slides"],[1,"text-gray-600","mb-3","mx-3","px-2"],[1,"text-xl","font-semibold","mb-4"],[1,"text-gray-500","text-sm","mb-6","mx-3","px-2"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","d","M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"],["fill","red","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4","text-red-500"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),d(3,"img",3),r(),t(4,"div",4)(5,"div",5),m(6),r(),t(7,"div",6)(8,"div",7),m(9," Doctor "),r(),t(10,"div",8),m(11),r()()()(),d(12,"div",9),b(13,V,1,1,"app-post-carousel",10)(14,G,3,1,"div",11)(15,H,2,1,"div",12),t(16,"div",13)(17,"div",14)(18,"span",15),x("click",function(){return e.toggleSavePost()}),c(),t(19,"svg",16),d(20,"path",17),r()()(),f(),t(21,"div",18)(22,"span",19),c(),t(23,"svg",20),d(24,"path",21),r()(),f(),t(25,"span",22),x("click",function(){return e.toggleLike()}),b(26,$,2,0,"svg",23)(27,z,2,0,"svg",24),r()()(),t(28,"div",25)(29,"div",26)(30,"div",27),m(31,"Comments:"),t(32,"div",28),m(33),r()()(),t(34,"div",29)(35,"div",30),m(36,"Likes: "),t(37,"div",28),m(38),r()()()(),t(39,"div",31),d(40,"img",32),t(41,"span",33)(42,"button",34),c(),t(43,"svg",35),d(44,"path",36),r()()(),f(),t(45,"input",37),x("click",function(){return e.toggleCommentBoxVisibility()}),r()()()),l&2&&(n(3),p("src",e.post.doctorId.profilePic,S),n(3),v(e.post.doctorId.firstName),n(5),w(" \u2022 ",e.timeDifference," "),n(2),p("ngIf",e.post.media&&e.post.media.length>0),n(),p("ngIf",e.post.content),n(),p("ngIf",e.post.content),n(4),k("fill",e.isSavedPost?"black":"none"),n(7),p("ngIf",!e.isLiked),n(),p("ngIf",e.isLiked),n(6),w(" ",e.post.comments.length,""),n(5),w(" ",e.post.likes.length,""))},dependencies:[B,E,I,C]});let o=s;return o})();export{Z as a};
