import{a as Z,f as J}from"./chunk-NYSFVAEN.js";import{a as Ie}from"./chunk-4SI3YIVV.js";import{a as H}from"./chunk-K3YDVDKG.js";import{a as ke,b as De}from"./chunk-CYDBOJLB.js";import{n as Fe}from"./chunk-PMOOMPTR.js";import{a as be}from"./chunk-2Y4F4EED.js";import{b as Te,c as Ee}from"./chunk-A6KYARSH.js";import"./chunk-NA4L6LVS.js";import"./chunk-CR6JZSZX.js";import"./chunk-6SCAOAVA.js";import"./chunk-G5ICJGMX.js";import"./chunk-YW3RTZQ7.js";import{f as X}from"./chunk-NMHO4S76.js";import{a as Se}from"./chunk-NTYYFM43.js";import"./chunk-KDZEB7UL.js";import{c as Ce,d as re,f as $,i as ne}from"./chunk-7B4WEPGY.js";import{n as we}from"./chunk-LSVHHTYO.js";import{c as ce,d as de}from"./chunk-N7UIUSV4.js";import{B as U,D as Y,b as pe,c as L,e as g,g as q,h as z,k as ue,m as G,n as ge,p as j,q as fe,r as B,s as Q,t as he,u as _e,v as xe,w as ve,x as ye}from"./chunk-H56WTM6A.js";import"./chunk-DHV3KFP7.js";import"./chunk-VNHCDGQ4.js";import{$b as b,Jb as p,Ka as x,La as v,Lb as c,Ma as w,Na as T,Nb as V,Ua as E,Vb as n,Wb as r,Xb as f,cc as h,ec as u,g as F,hc as le,jd as M,kc as ee,kd as k,lb as ae,lc as te,mc as ie,oc as s,pc as I,qc as se,rb as m,sb as y,td as D,xc as me,yc as S,za as C}from"./chunk-VIIRXEWM.js";var Ve=(()=>{let l=class l{constructor(){this.currentStep=1}isCurrentStep(i){return this.currentStep===i}};l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=C({type:l,selectors:[["app-progressive-bar"]],inputs:{currentStep:"currentStep"},standalone:!0,features:[S],decls:23,vars:32,consts:[[1,"mx-auto","max-w-7xl"],[1,"p-6","w-full","overflow-hidden","rounded-lg","ring-1","ring-slate-900/10","mt-4"],["aria-label","Progress"],["role","list",1,"space-y-4","md:flex","md:space-y-0","md:space-x-8"],[1,"md:flex-1"],["href","#",1,"group","flex","flex-col","border-l-4","py-2","pl-4","md:border-l-0","md:border-t-4","md:pl-0","md:pt-4","md:pb-0"],[1,"text-sm","font-medium"],["href","#","aria-current","step",1,"flex","flex-col","border-l-4","py-2","pl-4","md:border-l-0","md:border-t-4","md:pl-0","md:pt-4","md:pb-0"],[1,"text-sm","font-medium","text-indigo-600"],[1,"text-sm","font-medium","text-gray-500","group-hover:text-gray-700"]],template:function(a,e){a&1&&(n(0,"div")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ol",3)(5,"li",4)(6,"a",5)(7,"span",6),s(8,"Step 1"),r(),n(9,"span",6),s(10,"Professional details"),r()()(),n(11,"li",4)(12,"a",7)(13,"span",8),s(14,"Step 2"),r(),n(15,"span",6),s(16,"Additional details"),r()()(),n(17,"li",4)(18,"a",5)(19,"span",9),s(20,"Step 3"),r(),n(21,"span",6),s(22,"Preview & Submit "),r()()()()()()()()),a&2&&(m(6),V("border-indigo-600",e.currentStep>=1)("border-gray-200",e.currentStep<1)("hover:border-indigo-800",e.currentStep>=1)("hover:border-gray-300",e.currentStep<1),m(),V("text-indigo-600",e.currentStep>=1)("group-hover:text-indigo-800",e.currentStep>=1)("text-gray-500",e.currentStep<1)("group-hover:text-gray-700",e.currentStep<1),m(5),V("border-indigo-600",e.currentStep>=2)("border-gray-200",e.currentStep<2)("hover:border-indigo-800",e.currentStep>=2)("hover:border-gray-300",e.currentStep<2),m(6),V("border-indigo-600",e.currentStep>=3)("border-gray-200",e.currentStep<2)("hover:border-indigo-800",e.currentStep>=3)("hover:border-gray-300",e.currentStep<3))},styles:[".tooltip[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{display:block}"]});let t=l;return t})();function Oe(t,l){t&1&&(n(0,"span",49),s(1,"City is required."),r())}function Me(t,l){if(t&1&&(n(0,"mat-error"),p(1,Oe,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("address.city"))==null||o.errors==null?null:o.errors.required)}}function Le(t,l){t&1&&(n(0,"span",49),s(1,"state is required."),r())}function qe(t,l){if(t&1&&(n(0,"mat-error"),p(1,Le,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("address.state"))==null||o.errors==null?null:o.errors.required)}}function ze(t,l){t&1&&(n(0,"span",49),s(1,"Zipcode is must be 6 numbers."),r())}function Ge(t,l){if(t&1&&(n(0,"mat-error"),p(1,ze,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("address.zipcode"))==null||o.errors==null?null:o.errors.required)}}function je(t,l){if(t&1&&(n(0,"option",50),s(1),r()),t&2){let o=l.$implicit;c("value",o),m(),I(o)}}function Be(t,l){t&1&&(n(0,"span",49),s(1,"Country is required."),r())}function Qe(t,l){if(t&1&&(n(0,"mat-error"),p(1,Be,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("address.country"))==null||o.errors==null?null:o.errors.required)}}function Ue(t,l){if(t&1&&(n(0,"option",50),s(1),r()),t&2){let o=l.$implicit;c("value",o._id),m(),I(o.name)}}function Ye(t,l){t&1&&(n(0,"span",49),s(1,"specialization is required."),r())}function $e(t,l){if(t&1&&(n(0,"mat-error"),p(1,Ye,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("specialization"))==null||o.errors==null?null:o.errors.required)}}function He(t,l){t&1&&(n(0,"span",49),s(1,"experience is required."),r())}function Xe(t,l){if(t&1&&(n(0,"mat-error"),p(1,He,2,0,"span",48),r()),t&2){let o,i=u();m(),c("ngIf",(o=i.registrationForm.get("experience"))==null||o.errors==null?null:o.errors.required)}}function Ze(t,l){t&1&&(n(0,"mat-error")(1,"span",49),s(2,"At least one PDF file is required."),r()())}function Je(t,l){if(t&1){let o=b();n(0,"div",53)(1,"span",54),s(2),r(),n(3,"button",55),h("click",function(){let a=x(o).index,e=u(2);return v(e.removeCertificationFile(a))}),w(),n(4,"svg",56),f(5,"path",57),r()()()}if(t&2){let o=l.$implicit;m(2),I(o.value.name)}}function We(t,l){if(t&1&&(n(0,"div",51),p(1,Je,6,1,"div",52),r()),t&2){let o=u();m(),c("ngForOf",o.certificationFiles().controls)}}function Ke(t,l){t&1&&(n(0,"mat-error")(1,"span",49),s(2,"Language is required."),r()())}function et(t,l){if(t&1){let o=b();n(0,"div",58),f(1,"input",59),n(2,"button",60),h("click",function(){let a=x(o).index,e=u();return v(e.removeLanguage(a))}),f(3,"i",61),r(),p(4,Ke,3,0,"mat-error",9),r()}if(t&2){let o=l.index,i=u();m(),le("formControlName",o),m(3),c("ngIf",i.languageControls().at(o).invalid&&i.languageControls().at(o).touched)}}function tt(t,l){t&1&&(n(0,"mat-error")(1,"span",49),s(2,"At least one language is required."),r()())}function it(t,l){t&1&&(n(0,"mat-error")(1,"span",67),s(2,"Degree is required."),r()())}function rt(t,l){t&1&&(n(0,"mat-error")(1,"span",68),s(2,"Institution is required."),r()())}function nt(t,l){t&1&&(n(0,"mat-error")(1,"span",49),s(2,"Year is required."),r()())}function ot(t,l){if(t&1){let o=b();n(0,"div")(1,"div",62),f(2,"input",63)(3,"input",64)(4,"input",65),n(5,"button",60),h("click",function(){let a=x(o).index,e=u();return v(e.removeEducation(a))}),s(6,"Remove"),r()(),n(7,"div",66),p(8,it,3,0,"mat-error",9)(9,rt,3,0,"mat-error",9)(10,nt,3,0,"mat-error",9),r()()}if(t&2){let o,i,a,e=l.index,d=u();m(),c("formGroupName",e),m(7),c("ngIf",((o=d.educationControls.at(e))==null||(o=o.get("degree"))==null?null:o.invalid)&&((o=d.educationControls.at(e))==null||(o=o.get("degree"))==null?null:o.touched)),m(),c("ngIf",((i=d.educationControls.at(e))==null||(i=i.get("institution"))==null?null:i.invalid)&&((i=d.educationControls.at(e))==null||(i=i.get("institution"))==null?null:i.touched)),m(),c("ngIf",((a=d.educationControls.at(e))==null||(a=a.get("year"))==null?null:a.invalid)&&((a=d.educationControls.at(e))==null||(a=a.get("year"))==null?null:a.touched))}}var W=(()=>{let l=class l{constructor(i,a,e){this.fb=i,this.doctorSpecializationService=a,this.doctorAuthSevice=e,this.formValidityChange=new E,this.isLoading=new E(!1),this.doctorCategories=[],this.countries=["Afghanistan","Albania","Algeria","Andorra","Angola","Argentina","Australia","Austria","Bangladesh","Belgium","Brazil","Canada","China","Colombia","Czech Republic","Egypt","France","Germany","India","Indonesia","Italy","Japan","Mexico","Netherlands","New Zealand","Nigeria","Pakistan","Russia","South Africa","Spain","United Kingdom","United States"]}ngOnInit(){this.loadDoctorCategories(),this.registrationForm=this.fb.group({address:this.fb.group({city:["",g.required],state:["",g.required],zipcode:["",[g.required,g.minLength(6),g.maxLength(6)]],country:["",g.required]}),specialization:["",g.required],education:this.fb.array([this.createEducationFormGroup()]),experience:["",g.required],certifications:this.fb.array([]),languages:this.fb.array([],g.required)}),this.registrationForm.valueChanges.subscribe(()=>{this.formValidityChange.emit(this.registrationForm.valid)})}loadDoctorCategories(){this.doctorSpecializationService.getAllDoctorCategories().subscribe(i=>{console.log(i),this.doctorCategories=i.data})}createEducationFormGroup(){return this.fb.group({degree:["",g.required],institution:["",g.required],year:["",g.required]})}addEducation(){this.registrationForm.get("education").push(this.createEducationFormGroup())}removeEducation(i){this.registrationForm.get("education").removeAt(i)}get educationControls(){return this.registrationForm.get("education").controls}addLanguage(){this.registrationForm.get("languages").push(this.fb.control("",g.required))}removeLanguage(i){this.registrationForm.get("languages").removeAt(i)}languageControls(){return this.registrationForm.get("languages")}get files(){return this.registrationForm.get("certifications")}onCertificationFileChange(i){let a=i.target.files;if(a)for(let e of a)this.addCertificationControl(e)}addCertificationControl(i){this.registrationForm.get("certifications").push(new ue(i))}removeCertificationFile(i){this.registrationForm.get("certifications").removeAt(i)}certificationFiles(){return this.registrationForm.get("certifications")}onSubmit(){return new Promise((i,a)=>{this.registrationForm.valid?(console.log(this.registrationForm.value),this.isLoading.emit(!0),this.doctorAuthSevice.registerProfessional(this.registrationForm.value).subscribe({next:e=>{this.isLoading.emit(!1),i(e)},error:e=>{this.isLoading.emit(!1),a(e)}})):(console.error("Form is invalid"),a("Form is invalid"))})}};l.\u0275fac=function(a){return new(a||l)(y(U),y(Ie),y(H))},l.\u0275cmp=C({type:l,selectors:[["app-doctor-register-two"]],outputs:{formValidityChange:"formValidityChange",isLoading:"isLoading"},standalone:!0,features:[S],decls:93,vars:14,consts:[[1,"relative","font-inter","antialiased"],[1,"relative","min-h-screen","flex","flex-col","justify-center","bg-slate-50","overflow-hidden"],[1,"font-[sans-serif]","text-[#333]"],[1,"mx-4","mb-4","mt-1"],[1,"max-w-4xl","mx-auto","bg-white","shadow-[0_2px_18px_-3px_rgba(6,81,237,0.4)]","sm:p-8","p-4","rounded-md",3,"ngSubmit","formGroup"],["formGroupName","address",1,"grid","md:grid-cols-2","gap-y-7","gap-x-12","mb-2"],[1,"flex","flex-col"],["for","city",1,"text-sm","mb-2","block"],["formControlName","city","id","city","name","city","type","text","placeholder","Enter city",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],[4,"ngIf"],["for","state",1,"text-sm","mb-2","block"],["formControlName","state","id","state","name","state","type","text","placeholder","Enter state",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["for","zipcode",1,"text-sm","mb-2","block"],["formControlName","zipcode","id","zipcode","name","zipcode","type","text","placeholder","Enter zipcode",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["for","country",1,"text-sm","mb-2","block"],["formControlName","country","id","country","name","country","placeholder","Enter country",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","md:grid-cols-2","gap-y-7","gap-x-12"],["for","specialization",1,"text-sm","mb-2","block"],["formControlName","specialization","id","specialization","name","specialization","placeholder","Select Your Speciality",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["for","experience",1,"text-sm","mb-2","block"],["formControlName","experience","id","experience","name","experience",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],[1,"text-sm","mb-2","block"],[1,"flex","items-center"],["for","certifications-upload",1,"w-64","flex","flex-col","items-center","px-4","py-6","bg-white","text-blue","rounded-lg","shadow-lg","tracking-wide","uppercase","border","border-blue","cursor-pointer","hover:bg-blue","hover:text-white"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"w-8","h-8"],["d","M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"],[1,"mt-2","text-base","leading-normal"],["type","file","id","certifications-upload","multiple","","accept","image/*",1,"hidden",3,"change"],["class","ml-4",4,"ngIf"],[1,"col-span-2"],["formArrayName","languages"],[1,"flex","flex-wrap"],["class","flex items-center mb-2 mr-2",4,"ngFor","ngForOf"],["type","button",1,"text-blue-500","font-semibold","px-2","py-1",3,"click"],["formArrayName","education"],[4,"ngFor","ngForOf"],["class","text-red-600 font-thin text-xs",4,"ngIf"],[1,"text-red-600","font-thin","text-xs"],[3,"value"],[1,"ml-4"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],[1,"text-sm"],["type","button",1,"ml-2","text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","items-center","mb-2","mr-2"],["type","text","placeholder","Enter language",1,"bg-gray-100","w-32","text-sm","px-4","py-3","rounded-md","outline-blue-500","mr-2",3,"formControlName"],["type","button",1,"text-red-500","font-semibold","px-2","py-1",3,"click"],[1,"fas","fa-times"],[1,"flex","items-center","mb-2",3,"formGroupName"],["formControlName","degree","type","text","placeholder","Degree",1,"bg-gray-100","w-1/3","text-sm","px-4","py-3","rounded-md","outline-blue-500","mr-4"],["formControlName","institution","type","text","placeholder","Institution",1,"bg-gray-100","w-1/3","text-sm","px-4","py-3","rounded-md","outline-blue-500","mr-4"],["formControlName","year","type","text","placeholder","Year",1,"bg-gray-100","w-1/3","text-sm","px-4","py-3","rounded-md","outline-blue-500","mr-4"],[1,"flex","items-center","mb-2"],[1,"text-red-600","font-thin","text-xs","me-11"],[1,"text-red-600","font-thin","text-xs","me-5"]],template:function(a,e){if(a&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"form",4),h("ngSubmit",function(){return e.onSubmit()}),n(5,"div",5)(6,"div",6)(7,"label",7),s(8,"City"),r(),f(9,"input",8),p(10,Me,2,1,"mat-error",9),r(),n(11,"div",6)(12,"label",10),s(13,"state"),r(),f(14,"input",11),p(15,qe,2,1,"mat-error",9),r(),n(16,"div",6)(17,"label",12),s(18,"Zipcode"),r(),f(19,"input",13),p(20,Ge,2,1,"mat-error",9),r(),n(21,"div",6)(22,"label",14),s(23,"Country"),r(),n(24,"select",15)(25,"option",16),s(26,"Select Country"),r(),p(27,je,2,2,"option",17),r(),p(28,Qe,2,1,"mat-error",9),r()(),n(29,"div",18)(30,"div")(31,"label",19),s(32,"Specialization"),r(),n(33,"select",20)(34,"option",16),s(35,"Select specialization"),r(),p(36,Ue,2,2,"option",17),r(),p(37,$e,2,1,"mat-error",9),r(),n(38,"div")(39,"label",21),s(40,"Experience"),r(),n(41,"select",22)(42,"option",16),s(43,"Select experience"),r(),n(44,"option",23),s(45,"1 year"),r(),n(46,"option",24),s(47,"2 years"),r(),n(48,"option",25),s(49,"3 years"),r(),n(50,"option",26),s(51,"4 years"),r(),n(52,"option",27),s(53,"5 years"),r(),n(54,"option",28),s(55,"6 years"),r(),n(56,"option",29),s(57,"7 years"),r(),n(58,"option",30),s(59,"8 years"),r(),n(60,"option",31),s(61,"9 years"),r(),n(62,"option",32),s(63,"10+ years"),r()(),p(64,Xe,2,1,"mat-error",9),r(),n(65,"div")(66,"label",33),s(67,"Certifications (PDF)"),r(),n(68,"div",34)(69,"label",35),w(),n(70,"svg",36),f(71,"path",37),r(),T(),n(72,"span",38),s(73,"Select a file"),r(),n(74,"input",39),h("change",function(_){return e.onCertificationFileChange(_)}),r()(),p(75,Ze,3,0,"mat-error",9)(76,We,2,1,"div",40),r()(),n(77,"div",41)(78,"label",33),s(79,"Languages"),r(),n(80,"div",42)(81,"div",43),p(82,et,5,2,"div",44),r()(),p(83,tt,3,0,"mat-error",9),n(84,"button",45),h("click",function(){return e.addLanguage()}),s(85,"Add Language"),r()(),n(86,"div",41)(87,"label",33),s(88,"Education"),r(),n(89,"div",46),p(90,ot,11,4,"div",47),r(),n(91,"button",45),h("click",function(){return e.addEducation()}),s(92,"Add Education"),r()()()()()()()()),a&2){let d,_,R,A,P,N,O;m(4),c("formGroup",e.registrationForm),m(6),c("ngIf",((d=e.registrationForm.get("address.city"))==null?null:d.invalid)&&((d=e.registrationForm.get("address.city"))==null?null:d.touched)),m(5),c("ngIf",((_=e.registrationForm.get("address.state"))==null?null:_.invalid)&&((_=e.registrationForm.get("address.state"))==null?null:_.touched)),m(5),c("ngIf",((R=e.registrationForm.get("address.zipcode"))==null?null:R.invalid)&&((R=e.registrationForm.get("address.zipcode"))==null?null:R.touched)),m(7),c("ngForOf",e.countries),m(),c("ngIf",((A=e.registrationForm.get("address.country"))==null?null:A.invalid)&&((A=e.registrationForm.get("address.country"))==null?null:A.touched)),m(8),c("ngForOf",e.doctorCategories),m(),c("ngIf",((P=e.registrationForm.get("specialization"))==null?null:P.invalid)&&((P=e.registrationForm.get("specialization"))==null?null:P.touched)),m(27),c("ngIf",((N=e.registrationForm.get("experience"))==null?null:N.invalid)&&((N=e.registrationForm.get("experience"))==null?null:N.touched)),m(11),c("ngIf",((O=e.registrationForm.get("certifications"))==null?null:O.invalid)&&((O=e.registrationForm.get("certifications"))==null?null:O.touched)),m(),c("ngIf",e.certificationFiles().length>0),m(6),c("ngForOf",e.languageControls().controls),m(),c("ngIf",e.languageControls().length===0&&e.languageControls().touched),m(7),c("ngForOf",e.educationControls)}},dependencies:[Y,G,_e,xe,L,he,q,z,j,Q,fe,B,D,M,k,J,Z]});let t=l;return t})();function at(t,l){t&1&&(n(0,"mat-error")(1,"span",28),s(2,"Max patients per day must be a number greater than or equal to 0."),r()())}function lt(t,l){t&1&&(n(0,"mat-error")(1,"span",28),s(2,"Bio is required and must be at least 20 characters long."),r()())}function st(t,l){if(t&1){let o=b();n(0,"div",29)(1,"input",30),h("change",function(){x(o);let a=u();return v(a.updateConsultationFees(a.typesOfConsultation.value))}),r(),n(2,"label",31),s(3),r()()}if(t&2){let o=l.$implicit,i=l.index;m(),c("formControlName",i),m(2),I(o.value.type)}}function mt(t,l){t&1&&(n(0,"mat-error"),s(1," Fee is required and must be greater than or equal to 0. "),r())}function ct(t,l){if(t&1){let o=b();n(0,"div")(1,"label",32),s(2),n(3,"input",33),h("input",function(a){x(o);let e=u().index,d=u();return v(d.updateFee(e,a.target))}),r(),p(4,mt,2,0,"mat-error",19),r()()}if(t&2){let o,i=u(),a=i.$implicit,e=i.index,d=u();m(2),se(" Enter ",a.value.type," Consultation Fee: "),m(),c("formControlName",e),m(),c("ngIf",((o=d.consultationFeeControl.at(e))==null?null:o.invalid)&&((o=d.consultationFeeControl.at(e))==null?null:o.touched))}}function dt(t,l){if(t&1&&(n(0,"div"),p(1,ct,5,3,"div",19),r()),t&2){let o=l.index,i=u();m(),c("ngIf",i.typesOfConsultation.controls[o]==null?null:i.typesOfConsultation.controls[o].value)}}var K=(()=>{let l=class l{constructor(i,a,e){this.fb=i,this.doctorAuthService=a,this.toastr=e,this.formValidityChange=new E,this.isLoading=new E(!1),this.selectedFile=null,this.profileImage=null,this.consultationFees={video:0,chat:0,clinic:0}}ngOnInit(){this.consultationForm=this.fb.group({typesOfConsultation:this.fb.array([this.createConsultationTypeFormGroup("video"),this.createConsultationTypeFormGroup("chat"),this.createConsultationTypeFormGroup("clinic")],this.validateTypesOfConsultation),consultationFee:this.fb.array([this.createConsultationFeeFormGroup("video"),this.createConsultationFeeFormGroup("chat"),this.createConsultationFeeFormGroup("clinic")]),bio:["",[g.required,g.minLength(20)]],maxPatientsPerDay:[10,[g.required,g.min(0),g.max(13)]]}),this.consultationForm.valueChanges.subscribe(()=>{this.formValidityChange.emit(this.consultationForm.valid)})}createConsultationTypeFormGroup(i){return this.fb.group({type:[i]})}createConsultationFeeFormGroup(i){return this.fb.group({type:[i],fee:[0,[g.required,g.min(0)]]})}updateConsultationFees(i){i.forEach((a,e)=>{let d=this.typesOfConsultation.at(e)?.get("type")?.value,_=this.consultationForm.get("consultationFee")?.get(d);_&&(a?_.enable():_.disable())})}get typesOfConsultation(){return this.consultationForm.get("typesOfConsultation")}get consultationFeeControl(){return this.consultationForm.get("consultationFee")}updateFee(i,a){let e=this.consultationFeeControl.at(i).get("fee");e&&e.setValue(a.value)}validateTypesOfConsultation(i){return i.value.filter(e=>e).length>0?null:{required:!0}}get profilePicControl(){return this.consultationForm.get("profilePic")}get bioControl(){return this.consultationForm.get("bio")}previewImage(i){let a=i.target.files[0];if(a){if(!a.type.startsWith("image/")){console.error("Invalid file type. Please select an image file.");return}this.selectedFile=a,this.uploadImage();let e=new FileReader;e.onload=d=>{this.profileImage=d.target?.result},e.readAsDataURL(a)}}uploadImage(){return F(this,null,function*(){if(!this.selectedFile){console.error("No file selected!");return}try{let i=yield this.doctorAuthService.addProfilePic(this.selectedFile).toPromise();console.log("Image uploaded successfully:",i)}catch(i){console.error("Error uploading image:",i)}})}onSubmit(){return F(this,null,function*(){this.logErrors(),console.log("form trying to submit",JSON.stringify(this.consultationForm.value)),console.log("////////////////+",this.consultationForm.value);try{if(this.consultationForm.valid){console.log("////////////////+",this.consultationForm.value),this.isLoading.emit(!0);let i=yield this.doctorAuthService.registerAdditional(this.consultationForm.value).toPromise();return this.isLoading.emit(!1),i}else throw this.consultationForm.markAllAsTouched(),new Error("Please check the form for errors")}catch(i){throw this.isLoading.emit(!1),console.error("An error occurred while submitting data or form validation failed:",i),i}})}logErrors(){console.log("Form validity:",this.consultationForm.valid),console.log("Form errors:",this.consultationForm.errors),console.log("Types of consultation validity:",this.typesOfConsultation.valid),console.log("Types of consultation errors:",this.typesOfConsultation.errors),console.log("Consultation fee validity:",this.consultationForm.get("consultationFee")?.valid),console.log("Consultation fee errors:",this.consultationForm.get("consultationFee")?.errors),console.log("Bio validity:",this.bioControl?.valid),console.log("Bio errors:",this.bioControl?.errors),console.log("Max patients per day validity:",this.consultationForm.get("maxPatientsPerDay")?.valid),console.log("Max patients per day errors:",this.consultationForm.get("maxPatientsPerDay")?.errors)}};l.\u0275fac=function(a){return new(a||l)(y(U),y(H),y(Se))},l.\u0275cmp=C({type:l,selectors:[["app-doctor-third-step-registration"]],outputs:{formValidityChange:"formValidityChange",isLoading:"isLoading"},standalone:!0,features:[S],decls:37,vars:6,consts:[[1,"relative","font-inter","antialiased"],[1,"relative","min-h-screen","flex","flex-col","justify-center","bg-slate-50","overflow-hidden"],[1,"font-[sans-serif]","text-[#333]"],[1,"mx-4","mb-4","mt-1"],[1,"max-w-4xl","mx-auto","bg-white","shadow-[0_2px_18px_-3px_rgba(6,81,237,0.4)]","sm:p-8","p-4","rounded-md",3,"formGroup"],[1,"grid","md:grid-cols-1","gap-y-7","gap-x-12","mb-2"],[1,"mb-5","text-center"],[1,"mx-auto","w-32","h-32","mb-2","border","rounded-full","relative","bg-gray-100","mb-4","shadow-inset"],["id","image",1,"object-cover","w-full","h-32","rounded-full",3,"src"],["for","fileInput","type","button",1,"cursor-pointer","inine-flex","justify-between","items-center","focus:outline-none","border","py-2","px-4","rounded-lg","shadow-sm","text-left","text-gray-600","bg-white","hover:bg-gray-100","font-medium"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"inline-flex","flex-shrink-0","w-6","h-6","-mt-1","mr-1"],["x","0","y","0","width","24","height","24","stroke","none"],["d","M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"],["cx","12","cy","13","r","3"],[1,"mx-auto","w-48","text-gray-500","text-xs","text-center","mt-1"],["name","photo","id","fileInput","accept","image/*","type","file",1,"hidden",3,"change"],[1,"grid","md:grid-cols-2","gap-y-7","gap-x-12"],["for","maxPatientsPerDay",1,"text-sm","mb-2","block"],["formControlName","maxPatientsPerDay","id","maxPatientsPerDay","name","maxPatientsPerDay","type","number","min","1","max","13",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],[4,"ngIf"],["for","bio",1,"text-sm","mb-2","block"],["formControlName","bio","id","bio","name","bio","placeholder","Enter bio",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500"],["formArrayName","typesOfConsultation"],[1,"text-sm","mb-2","block"],["class","checkbox-item",4,"ngFor","ngForOf"],["formArrayName","consultationFee"],["for","consultationFee",1,"text-sm","mb-2","block"],[4,"ngFor","ngForOf"],[1,"text-red-600","font-thin","text-xs"],[1,"checkbox-item"],["type","checkbox",1,"checkbox-input",3,"change","formControlName"],[1,"checkbox-label"],[1,"fee-label"],["type","number","min","1",1,"bg-gray-100","w-full","text-sm","px-4","py-3","rounded-md","outline-blue-500",3,"input","formControlName"]],template:function(a,e){if(a&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"div",6)(7,"div",7),f(8,"img",8),r(),n(9,"label",9),w(),n(10,"svg",10),f(11,"rect",11)(12,"path",12)(13,"circle",13),r(),s(14," Browse Photo "),r(),T(),n(15,"div",14),s(16,"Click to add profile picture"),r(),n(17,"input",15),h("change",function(_){return e.previewImage(_)}),r()()(),n(18,"div",16)(19,"div")(20,"label",17),s(21,"Max Patients Per Day"),r(),f(22,"input",18),p(23,at,3,0,"mat-error",19),r(),n(24,"div")(25,"label",20),s(26,"Bio"),r(),f(27,"textarea",21),p(28,lt,3,0,"mat-error",19),r(),n(29,"div",22)(30,"label",23),s(31,"Types Of Consultation You Prefer"),r(),p(32,st,4,2,"div",24),r(),n(33,"div",25)(34,"label",26),s(35,"Enter the Amount of Consultation for Each Consultation You choosed"),r(),p(36,dt,2,1,"div",27),r()()()()()()()),a&2){let d,_;m(4),c("formGroup",e.consultationForm),m(4),c("src",e.profileImage,ae),m(15),c("ngIf",((d=e.consultationForm.get("maxPatientsPerDay"))==null?null:d.invalid)&&((d=e.consultationForm.get("maxPatientsPerDay"))==null?null:d.touched)),m(5),c("ngIf",((_=e.consultationForm.get("bio"))==null?null:_.invalid)&&((_=e.consultationForm.get("bio"))==null?null:_.touched)),m(4),c("ngForOf",e.typesOfConsultation.controls),m(4),c("ngForOf",e.consultationFeeControl.controls)}},dependencies:[Y,G,L,ge,pe,q,z,ye,ve,j,Q,B,D,M,k,J,Z],styles:[".checkbox-label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.fee-label[_ngcontent-%COMP%]{display:block;margin-top:10px}.fee-input[_ngcontent-%COMP%]{width:100px;margin-top:5px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.checkbox-input[_ngcontent-%COMP%]{appearance:none;margin-right:8px;width:16px;height:16px;border:1px solid #4a5568;border-radius:4px;outline:none;cursor:pointer}.checkbox-input[_ngcontent-%COMP%]:checked{background-color:#1f6df5}.checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let t=l;return t})();function pt(t,l){if(t&1&&f(0,"app-progressive-bar",6),t&2){let o=u();c("currentStep",o.currentStep)}}function ut(t,l){if(t&1){let o=b();n(0,"div",7)(1,"app-doctor-register-two",8),h("isLoading",function(a){x(o);let e=u();return v(e.isLoading=a)})("formValidityChange",function(a){x(o);let e=u();return v(e.handleFormValidityChange(a))}),r()()}}function gt(t,l){if(t&1){let o=b();n(0,"div",7)(1,"app-doctor-third-step-registration",8),h("isLoading",function(a){x(o);let e=u();return v(e.isLoading=a)})("formValidityChange",function(a){x(o);let e=u();return v(e.handleFormValidityChange(a))}),r()()}}function ft(t,l){if(t&1){let o=b();n(0,"button",17),h("click",function(){x(o);let a=u(2);return v(a.nextStep())}),s(1,"Next"),r()}}function ht(t,l){t&1&&(n(0,"button",18),s(1," Loading..."),r())}function _t(t,l){if(t&1){let o=b();n(0,"button",17),h("click",function(){x(o);let a=u(2);return v(a.Complete())}),s(1,"Complete"),r()}}function xt(t,l){if(t&1){let o=b();n(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"button",13),h("click",function(){x(o);let a=u();return v(a.prevStep())}),s(5,"Previous"),r()(),n(6,"div",14),p(7,ft,2,0,"button",15)(8,ht,2,0,"button",16)(9,_t,2,0,"button",15),r()()()()}if(t&2){let o=u();m(4),c("disabled",o.currentStep===1||o.currentStep===3),m(3),c("ngIf",!o.isLoading&&o.currentStep!==2),m(),c("ngIf",o.isLoading),m(),c("ngIf",o.currentStep===2&&!o.isLoading)}}function vt(t,l){t&1&&(n(0,"div")(1,"div",19)(2,"div"),w(),n(3,"svg",20),f(4,"path",21),r(),T(),n(5,"h2",22),s(6,"Registration Success"),r(),n(7,"div",23),s(8," Thank you. We have sent you an email to Your Provided Email . Please click the link in the message to join back to your account. "),r(),n(9,"button",24),s(10,"Back to home"),r()()()()),t&2&&(m(9),c("routerLink","/doctor/login"))}var Kt=(()=>{let l=class l{constructor(i,a,e,d){this.store=i,this.router=a,this.AuthService=e,this.messageService=d,this.isFormValid=!1,this.isLoading=!1,this.waitloader=!1,this.currentStep=1,this.stepComponents=[W,K]}handleFormValidityChange(i){this.isFormValid=i,console.log(this.isFormValid)}prevStep(){console.log(this.currentStep),this.currentStep>1&&this.currentStep--}nextStep(){return F(this,null,function*(){if(this.currentStep===1&&this.isFormValid)try{yield this.childComponentOne.onSubmit(),this.currentStep++}catch(i){console.error("Error during form submission:",i)}})}Complete(){return F(this,null,function*(){if(this.currentStep===2)try{this.waitloader=!0,yield this.childComponentTwo.onSubmit(),this.currentStep++}catch{this.messageService.add({severity:"error",summary:"please Fill all fields",detail:"Process incomplete",life:3e3})}})}getCurrentComponent(){return this.stepComponents[this.currentStep-1]}isLastStep(){return this.currentStep>2}getIsLoading(){this.store.select(ke).subscribe(i=>{this.isLoading=i})}ngOnInit(){this.store.dispatch(Fe()),this.docSubscription=this.store.select(De).subscribe(i=>{console.log(i);let a=Number(i.registrationStepsCompleted);a===1?this.currentStep=1:a===2?this.currentStep=2:a===3&&!i.isProfileComplete?this.currentStep=3:this.handleUnauthenticated()})}ngOnDestroy(){this.loadingSubscription&&this.loadingSubscription.unsubscribe(),this.docSubscription&&this.docSubscription.unsubscribe()}handleUnauthenticated(){this.AuthService.isAuthenticated()?this.router.navigate(["/doctor"]):this.router.navigate(["/doctor/login"])}};l.\u0275fac=function(a){return new(a||l)(y(we),y(ce),y(be),y(X))},l.\u0275cmp=C({type:l,selectors:[["app-three-step-register"]],viewQuery:function(a,e){if(a&1&&(ee(W,5),ee(K,5)),a&2){let d;te(d=ie())&&(e.childComponentOne=d.first),te(d=ie())&&(e.childComponentTwo=d.first)}},standalone:!0,features:[me([X]),S],decls:8,vars:6,consts:[[3,"currentStep",4,"ngIf"],[3,"hidden"],[1,"mx-auto","max-w-7xl","pb-10"],["class","mt-2 mb-7",4,"ngIf"],["class","fixed bottom-0 left-0 right-0 py-5 bg-white shadow-md",4,"ngIf"],[4,"ngIf"],[3,"currentStep"],[1,"mt-2","mb-7"],[3,"isLoading","formValidityChange"],[1,"fixed","bottom-0","left-0","right-0","py-5","bg-white","shadow-md"],[1,"max-w-3xl","mx-auto","px-4"],[1,"flex","justify-between"],[1,"w-1/2"],[1,"bg-gray-200","hover:bg-gray-300","text-gray-700","font-bold","py-2","px-4","rounded-lg","focus:outline-none","focus:shadow-outline",3,"click","disabled"],[1,"w-1/2","text-right"],["class","bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline",3,"click",4,"ngIf"],["class","bg-blue-500  text-white font-bold py-2 px-4 rounded-lg opacity-50 cursor-not-allowed","disabled","",4,"ngIf"],[1,"bg-blue-500","hover:bg-blue-600","text-white","font-bold","py-2","px-4","rounded-lg","focus:outline-none","focus:shadow-outline",3,"click"],["disabled","",1,"bg-blue-500","text-white","font-bold","py-2","px-4","rounded-lg","opacity-50","cursor-not-allowed"],[1,"bg-white","rounded-lg","p-10","flex","items-center","justify-center","shadow"],["viewBox","0 0 20 20","fill","currentColor",1,"mb-4","h-20","w-20","text-green-500","mx-auto"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-2xl","mb-4","text-gray-800","text-center","font-bold"],[1,"text-gray-600","mb-8"],[1,"w-40","block","mx-auto","focus:outline-none","py-2","px-5","rounded-lg","shadow-sm","text-center","text-gray-600","bg-white","hover:bg-gray-100","font-medium","border",3,"routerLink"]],template:function(a,e){a&1&&(p(0,pt,1,1,"app-progressive-bar",0),n(1,"div",1)(2,"div",2),p(3,ut,2,0,"div",3)(4,gt,2,0,"div",3)(5,xt,10,4,"div",4)(6,vt,11,1,"div",5),r()(),f(7,"p-toast")),a&2&&(c("ngIf",e.currentStep<=3),m(),c("hidden",!1),m(2),c("ngIf",e.currentStep===1),m(),c("ngIf",e.currentStep===2),m(),c("ngIf",e.currentStep<4),m(),c("ngIf",e.isLastStep()))},dependencies:[Ve,D,k,W,K,de,Ee,Te],data:{animation:[Ce("slideAnimation",[ne(":enter",[$({transform:"translateX(-100%)"}),re("500ms ease-out",$({transform:"translateX(0)"}))]),ne(":leave",[re("500ms ease-in",$({transform:"translateX(-100%)"}))])])]}});let t=l;return t})();export{Kt as ThreeStepRegisterComponent};
