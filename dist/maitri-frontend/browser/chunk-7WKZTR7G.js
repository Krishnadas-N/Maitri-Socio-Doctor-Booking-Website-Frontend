import{a as T}from"./chunk-M5UAC7IA.js";import"./chunk-VOEKKMOV.js";import"./chunk-7AG6UC3F.js";import{a as N}from"./chunk-XDNE7C6I.js";import{a as L}from"./chunk-OQKLRLHO.js";import"./chunk-6CS5MZYZ.js";import"./chunk-7B4WEPGY.js";import{a as k,c as x}from"./chunk-FX3PANRP.js";import{B as A,D as E,c as P,e as u,g as y,h as S,m as C,p as I,s as _,y as F}from"./chunk-YKYY62M2.js";import"./chunk-3UF7QMRJ.js";import"./chunk-Y6YHTU6Y.js";import{Ib as c,Kb as m,Ub as a,Vb as o,Wb as f,bc as g,jd as w,nc as d,qb as l,rb as n,sd as v,xc as h,ya as b}from"./chunk-7CRQF3FF.js";function R(r,i){r&1&&(a(0,"div",12),d(1,"Please enter a valid password (at least 8 characters, including one uppercase letter, one lowercase letter, one number, and one special character)."),o())}function V(r,i){r&1&&(a(0,"div",12),d(1,"Passwords do not match."),o())}function q(r,i){r&1&&f(0,"i",13)}var J=(()=>{let i=class i{constructor(e,s,t,p,j,M){this.fb=e,this.UserService=s,this.route=t,this.rotuer=p,this.AuthService=j,this.toastr=M,this.isLoading=!1,this.token=""}ngOnInit(){this.initForm(),this.getTokenFromParams()}initForm(){this.changePassword=this.fb.group({password:["",[u.required,u.minLength(8),u.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/),u.maxLength(25)]],confirmPassword:["",u.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){let s=e.get("password")?.value,t=e.get("confirmPassword")?.value;s!==t?e.get("confirmPassword")?.setErrors({mismatch:!0}):e.get("confirmPassword")?.setErrors(null)}getTokenFromParams(){this.route.params.subscribe(e=>{console.log("token",e.token),this.token=e.token})}get f(){return this.changePassword.controls}onSubmit(){console.log("Submitted"),this.changePassword.valid?(this.isLoading=!0,this.UserService.saveNewPassword(this.token,this.changePassword.value.password,this.changePassword.value.confirmPassword).subscribe({next:e=>{this.toastr.success("Password Reset SuccessFully"),this.isLoading=!1,this.AuthService.isAuthenticated()?this.rotuer.navigate(["/"]):this.rotuer.navigate(["/login"])},error:e=>{this.isLoading=!1,this.toastr.error(e)}})):this.changePassword.markAllAsTouched()}};i.\u0275fac=function(s){return new(s||i)(n(A),n(N),n(k),n(x),n(T),n(L))},i.\u0275cmp=b({type:i,selectors:[["app-change-password"]],standalone:!0,features:[h],decls:19,vars:5,consts:[[1,"bg-blue-50","dark:bg-white","w-full"],[1,"border-2","border-black","flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],[1,"w-full","p-6","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","dark:bg-white","dark:border-gray-700","sm:p-8"],[1,"mb-1","text-xl","font-bold","leading-tight","tracking-tight","text-blue-900","md:text-2xl","dark:text-black"],[1,"mt-4","space-y-4","lg:mt-5","md:space-y-5",3,"ngSubmit","formGroup"],["for","password",1,"block","mb-2","text-sm","font-medium","text-blue-900","dark:text-black"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-blue-50","border","border-blue-300","text-blue-900","sm:text-sm","rounded-lg","focus:ring-blue-600","focus:border-blue-600","block","w-full","p-2.5","dark:bg-white","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["class","text-red-500 text-sm",4,"ngIf"],["for","confirm-password",1,"block","mb-2","text-sm","font-medium","text-blue-900","dark:text-black"],["formControlName","confirmPassword","type","password","name","confirm-password","id","confirm-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-blue-50","border","border-blue-300","text-blue-900","sm:text-sm","rounded-lg","focus:ring-blue-600","focus:border-blue-600","block","w-full","p-2.5","dark:bg-white","dark:border-gray-600","dark:placeholder-gray-400","dark:text-black","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-black","bg-blue-600","hover:bg-blue-700","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"disabled"],["class","fas fa-spinner fa-spin","style","font-size: 1.5em;",4,"ngIf"],[1,"text-red-500","text-sm"],[1,"fas","fa-spinner","fa-spin",2,"font-size","1.5em"]],template:function(s,t){s&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),d(4," Change Password "),o(),a(5,"form",4),g("ngSubmit",function(){return t.onSubmit()}),a(6,"div")(7,"label",5),d(8,"New Password"),o(),f(9,"input",6),c(10,R,2,0,"div",7),o(),a(11,"div")(12,"label",8),d(13,"Confirm password"),o(),f(14,"input",9),c(15,V,2,0,"div",7),o(),a(16,"button",10),c(17,q,1,0,"i",11),d(18," Reset password "),o()()()()()),s&2&&(l(5),m("formGroup",t.changePassword),l(5),m("ngIf",t.f.password.invalid&&(t.f.password.dirty||t.f.password.touched)),l(5),m("ngIf",t.f.confirmPassword.invalid&&(t.f.confirmPassword.dirty||t.f.confirmPassword.touched)),l(),m("disabled",t.isLoading),l(),m("ngIf",t.isLoading))},dependencies:[E,C,P,y,S,F,I,_,v,w]});let r=i;return r})();export{J as ChangePasswordComponent};
