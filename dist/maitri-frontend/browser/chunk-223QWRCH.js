import{a as A,b as P,c as O}from"./chunk-VJKUCSBB.js";import"./chunk-7V6IRT4D.js";import{a as E}from"./chunk-HPB4V32M.js";import"./chunk-5BLQ6IMQ.js";import"./chunk-VNHCDGQ4.js";import{Jb as u,Lb as d,Vb as e,Wb as i,Xb as p,ec as f,kd as S,oc as o,pc as v,rb as l,sb as C,td as w,yc as D,za as x}from"./chunk-VIIRXEWM.js";function j(r,s){if(r&1&&(e(0,"div",13)(1,"div",19),p(2,"p-chart",20),i()()),r&2){let m=f();l(2),d("data",m.lineChartData)("options",m.lineChartOptions)}}function V(r,s){if(r&1&&(e(0,"div",21),p(1,"p-chart",22),i()),r&2){let m=f();l(),d("data",m.pieData)("options",m.pieChartOptions)}}var M=(()=>{let s=class s{constructor(t){this.doctorService=t,this.intialLoding=!0,this.totalAppointments=0,this.totalPatients=0}ngOnInit(){this.fetchDashboardDetails()}fetchDashboardDetails(){this.doctorService.getDashboardDetails().subscribe({next:t=>{this.intialLoding=!1,console.log("Doctor DashboardDetails",t),this.dashboardData=t.data.dashboardData,this.pieChartData=t.data.typeOfAppointments,this.intilializeLinearChart(),this.intilializePieChart(),this.totalAppointments=this.calculateTotalAppointments(t.data.dashboardData),this.totalPatients=t.data.totalPatients},error:t=>{this.intialLoding=!1,console.log(t)}})}intilializeLinearChart(){let t=getComputedStyle(document.documentElement),n=t.getPropertyValue("--text-color"),a=t.getPropertyValue("--text-color-secondary"),h=t.getPropertyValue("--surface-border"),c=Object.keys(this.dashboardData);console.log("months",c);let b=c.map(g=>this.dashboardData[g].completedAppointments),y=c.map(g=>this.dashboardData[g].cancelledAppointments);console.log("completedAppointmentsData cancelledAppointmentsData",y,b),this.lineChartOptions={stacked:!1,maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:n}}},scales:{x:{ticks:{color:a},grid:{color:h}},y:{type:"linear",display:!0,position:"left",ticks:{color:a},grid:{color:h}},y1:{type:"linear",display:!0,position:"right",ticks:{color:a},grid:{drawOnChartArea:!1,color:h}}}},this.lineChartData={labels:c,datasets:[{label:"Completed Appointments",data:b,borderColor:t.getPropertyValue("--green-500"),tension:.4,fill:!0},{label:"Cancelled Appointments",data:y,borderColor:t.getPropertyValue("--blue-500"),tension:.4,fill:!0}]}}intilializePieChart(){let t=getComputedStyle(document.documentElement),n=t.getPropertyValue("--text-color");console.log(Object.keys(this.pieChartData),Object.values(this.pieChartData)),this.pieData={labels:Object.keys(this.pieChartData),datasets:[{data:Object.values(this.pieChartData),backgroundColor:[t.getPropertyValue("--blue-500"),t.getPropertyValue("--yellow-500"),t.getPropertyValue("--green-500")],hoverBackgroundColor:[t.getPropertyValue("--blue-400"),t.getPropertyValue("--yellow-400"),t.getPropertyValue("--green-400")]}]},this.pieChartOptions={plugins:{legend:{labels:{usePointStyle:!0,color:n}}}}}calculateTotalAppointments(t){let n=0;return Object.values(t).forEach(a=>{n+=a.totalAppointments}),n}};s.\u0275fac=function(n){return new(n||s)(C(E))},s.\u0275cmp=x({type:s,selectors:[["app-doctor-dashboard"]],standalone:!0,features:[D],decls:50,vars:10,consts:[[1,"flex","flex-col","space-y-4","p-6"],[1,"flex","justify-between","space-x-4"],[1,"w-1/3","bg-white","shadow-md"],[1,"rounded-lg","shadow-sm"],[1,"rounded-lg","bg-white","shadow-lg","md:shadow-xl","relative","overflow-hidden"],[1,"px-6","pt-8","pb-10","text-center","relative","z-10"],[1,"text-sm","uppercase","text-gray-500","leading-tight","p-4"],[1,"text-3xl","text-gray-700","font-semibold","leading-tight","my-3"],[1,"text-xs","text-green-500","leading-tight"],[1,"absolute","bottom-0","inset-x-0"],["height","70",3,"data","options"],[1,"lg:flex","justify-between","lg:space-x-4"],["class","lg:w-1/2 bg-white p-4 shadow-md mb-4 lg:mb-0",4,"ngIf"],[1,"lg:w-1/2","bg-white","p-4","shadow-md","mb-4","lg:mb-0"],[1,"text-center","mb-4"],[1,"text-xl","font-bold","text-gray-800"],["class","card flex justify-center items-center p-10 pt-14",4,"ngIf"],[1,"flex","justify-between","p-2"],[1,"w-1/2","bg-white","p-4","shadow-md"],[1,"card"],["type","line",3,"data","options"],[1,"card","flex","justify-center","items-center","p-10","pt-14"],["type","pie",3,"data","options"]],template:function(n,a){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),o(7,"Appoinments"),i(),e(8,"h3",7),o(9),i(),e(10,"p",8),o(11,"\u25B2 57.1%"),i()(),e(12,"div",9),p(13,"app-line-chart",10),i()()()(),e(14,"div",2)(15,"div",3)(16,"div",4)(17,"div",5)(18,"h4",6),o(19,"Appoinments"),i(),e(20,"h3",7),o(21,"3,682"),i(),e(22,"p",8),o(23,"\u25B2 57.1%"),i()(),e(24,"div",9),p(25,"app-line-chart",10),i()()()(),e(26,"div",2)(27,"div",3)(28,"div",4)(29,"div",5)(30,"h4",6),o(31,"Patients"),i(),e(32,"h3",7),o(33),i(),e(34,"p",8),o(35,"\u25B2 57.1%"),i()(),e(36,"div",9),p(37,"app-line-chart",10),i()()()()(),e(38,"div",11),u(39,j,3,2,"div",12),e(40,"div",13)(41,"div",14)(42,"h2",15),o(43,"Types of Consultations Chosen"),i()(),u(44,V,2,2,"div",16),i()(),e(45,"div",17)(46,"div",18),o(47,"Table 1"),i(),e(48,"div",18),o(49,"Table 2"),i()()()),n&2&&(l(9),v(a.totalAppointments),l(4),d("data",a.data1)("options",a.options1),l(12),d("data",a.data1)("options",a.options1),l(8),v(a.totalPatients),l(4),d("data",a.data1)("options",a.options1),l(2),d("ngIf",!a.intialLoding),l(5),d("ngIf",!a.intialLoding))},dependencies:[P,A,O,w,S]});let r=s;return r})();export{M as DoctorDashboardComponent};
