import{a as M}from"./chunk-GBIZXFVL.js";import{a as j}from"./chunk-ON4HZDHW.js";import{a as T}from"./chunk-LBT3GFMF.js";import{a as D}from"./chunk-OQKLRLHO.js";import"./chunk-6CS5MZYZ.js";import"./chunk-7B4WEPGY.js";import{C as k,c as S,g as C,l as R}from"./chunk-YKYY62M2.js";import"./chunk-3UF7QMRJ.js";import"./chunk-Y6YHTU6Y.js";import{Kb as u,La as m,Ma as w,N as h,Ub as o,Vb as a,Wb as v,bc as d,m as f,nc as c,qb as s,rb as g,tc as y,uc as x,vc as P,xc as _,ya as b}from"./chunk-7CRQF3FF.js";var W=(()=>{let l=class l{constructor(e,r){this.adminService=e,this.toastr=r,this.currentPage=1,this.totalPages=0,this.totalCount=0,this.pageSize=6,this.searchQuery="",this.searchSubject=new f,this.headers=[{text:"Patient Name",key:"patientName"},{text:"Doctor Name",key:"doctorName"},{text:"Ratings",key:"rating"},{text:"Description",key:"comment"},{text:"Date",key:"createdAt"}],this.reviews=[],this.config={showViewButton:!1,showDeleteButton:!0},this.searchSubject.pipe(h(300)).subscribe(t=>{this.searchQuery=t,this.getReviewDetails()})}ngOnInit(){this.getReviewDetails()}getReviewDetails(){this.adminService.getReviews(this.currentPage,this.pageSize,this.searchQuery).subscribe({next:e=>{console.log("Reviwws in Admin Side",e),this.reviews=e.data.reviews,this.currentPage=e.data.currentPage,this.pageSize=e.data.pageSize,this.totalCount=e.data.totalCount,this.totalPages=e.data.totalPages},error:e=>{console.log(e)}})}onSearchChange(e){let r=e.target;this.searchSubject.next(r.value)}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.getReviewDetails())}onPageChange(e){this.currentPage=e,this.getReviewDetails()}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.getReviewDetails())}deletreview(e){this.adminService.deleteReview(e).subscribe({next:r=>{let t=this.reviews.findIndex(n=>n._id.toString()===e);this.reviews.splice(t,1)},error:r=>{this.toastr.error("Error While deleting Review",r)}})}};l.\u0275fac=function(r){return new(r||l)(g(T),g(D))},l.\u0275cmp=b({type:l,selectors:[["app-review-listing"]],standalone:!0,features:[_],decls:24,vars:9,consts:[[1,"w-[95%]","flex","flex-col","h-full","text-gray-700","bg-white","shadow-md","rounded-xl","bg-clip-border","mx-auto"],[1,"relative","mx-1","mt-4","overflow-hidden","text-gray-700","bg-white","rounded-none","bg-clip-border"],[1,"flex","flex-col","justify-between","gap-2"],[1,"p-2","ps-6","flex","justify-between"],[1,"block","font-sans","text-xl","antialiased","font-semibold","leading-snug","tracking-normal","text-blue-gray-900"],[1,"w-full","md:w-72"],[1,"relative","h-10","w-full","min-w-[200px]"],[1,"absolute","grid","w-5","h-5","top-2/4","right-3","-translate-y-2/4","place-items-center","text-blue-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"],["placeholder"," ",1,"peer","h-full","w-full","rounded-[7px]","border","border-blue-gray-200","bg-transparent","px-3","py-2.5","!pr-9","font-sans","text-sm","font-normal","text-blue-gray-700","outline","outline-0","transition-all","placeholder-shown:border","placeholder-shown:border-blue-gray-200","placeholder-shown:border-t-blue-gray-200","focus:border-2","focus:border-gray-900","focus:border-t-transparent","focus:outline-0","disabled:border-0","disabled:bg-blue-gray-50",3,"ngModelChange","input","ngModel"],[1,"before:content['","']","after:content['","']","pointer-events-none","absolute","left-0","-top-1.5","flex","h-full","w-full","select-none","!overflow-visible","truncate","text-[11px]","font-normal","leading-tight","text-gray-500","transition-all","before:pointer-events-none","before:mt-[6.5px]","before:mr-1","before:box-border","before:block","before:h-1.5","before:w-2.5","before:rounded-tl-md","before:border-t","before:border-l","before:border-blue-gray-200","before:transition-all","after:pointer-events-none","after:mt-[6.5px]","after:ml-1","after:box-border","after:block","after:h-1.5","after:w-2.5","after:flex-grow","after:rounded-tr-md","after:border-t","after:border-r","after:border-blue-gray-200","after:transition-all","peer-placeholder-shown:text-sm","peer-placeholder-shown:leading-[3.75]","peer-placeholder-shown:text-blue-gray-500","peer-placeholder-shown:before:border-transparent","peer-placeholder-shown:after:border-transparent","peer-focus:text-[11px]","peer-focus:leading-tight","peer-focus:text-gray-900","peer-focus:before:border-t-2","peer-focus:before:border-l-2","peer-focus:before:!border-gray-900","peer-focus:after:border-t-2","peer-focus:after:border-r-2","peer-focus:after:!border-gray-900","peer-disabled:text-transparent","peer-disabled:before:border-transparent","peer-disabled:after:border-transparent","peer-disabled:peer-placeholder-shown:text-blue-gray-500"],[1,"col-span-12"],[1,"grid","gap-2","grid-cols-1","lg:grid-cols-1"],[1,"bg-white","p-4","shadow-lg","rounded-lg"],[1,"mt-2"],[1,"flex","flex-col"],[1,"-my-2","overflow-x-auto"],[1,"py-2","align-middle","inline-block","min-w-full"],[1,"shadow","overflow-hidden","border-b","border-gray-200","sm:rounded-lg","bg-white"],[3,"deleteReview","headers","rows","config","actions"],[3,"prevPage","nextPage","goToPage","currentPage","totalPages","totalCount","pageSize"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),c(5," Doctors Reviews "),a(),o(6,"div",5)(7,"div",6)(8,"div",7),m(),o(9,"svg",8),v(10,"path",9),a()(),w(),o(11,"input",10),P("ngModelChange",function(i){return x(t.searchQuery,i)||(t.searchQuery=i),i}),d("input",function(i){return t.onSearchChange(i)}),a(),o(12,"label",11),c(13," Search "),a()()()(),o(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"div",17)(20,"div",18)(21,"div",19)(22,"app-appoinment-table",20),d("deleteReview",function(i){return t.deletreview(i)}),a()()()(),o(23,"app-admin-pagination",21),d("prevPage",function(){return t.onPreviousPage()})("nextPage",function(){return t.onNextPage()})("goToPage",function(i){return t.onPageChange(i)}),a()()()()()()()()()),r&2&&(s(11),y("ngModel",t.searchQuery),s(11),u("headers",t.headers)("rows",t.reviews)("config",t.config)("actions",!0),s(),u("currentPage",t.currentPage)("totalPages",t.totalPages)("totalCount",t.totalCount)("pageSize",t.pageSize))},dependencies:[M,j,k,S,C,R]});let p=l;return p})();export{W as ReviewListingComponent};
